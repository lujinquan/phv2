<style>
	/*------------------ iframe页面去共用部分样式 S ----------------*/
	.layui-header,.layui-side,.layui-footer,.bread-crumbs{ display: none; color: #f60;}
	.layui-layout-admin .layui-body{top: 0;bottom: 0;}
	.layui-body{left: 0;}
	.page-tab-content{margin: 0;}
	/*------------------ iframe页面去共用部分样式 E ----------------*/
</style>
<div class="j-table-content">
<fieldset class="layui-elem-field layui-field-title j-field-box">
	<legend>楼栋查询</legend>
</fieldset>
<div class="page-toolbar j-page-toolbar clearfix">
      <form class="layui-form layui-form-pane" action="{url('index')}"  method="get" id="hisi-table-search">
		<div class="j-search-fl layui-col-md8  fl">
			  <div class="layui-input-inline j-input-margin" style="width:150px;">
				  <input type="text" name="ban_address" placeholder="地址" class="layui-input">
			  </div>
			  <input type="hidden" name="group" value="" class="layui-input">
		</div>
		<div class="j-search-fr layui-col-md4 fr">
          <div class="layui-input-inline fr">
			  <button type="reset" class="layui-btn j-btn-reset">重置</button>
              <button class="layui-btn layui-btn-normal" lay-submit lay-filter="formDemo">
                  <i class="layui-icon">&#xe615;</i>
                  查询
              </button>
          </div>
		</div>
      </form>
  </div>
{include file="system@block/layui" /}
<!-- 楼栋查询 -->
<table id="dataTable1" lay-filter='dataTable1' lay-filter="dataTable1"></table>
<!-- 房屋查询 -->
<fieldset class="layui-elem-field layui-field-title j-field-box">
	<legend>选择房屋</legend>
</fieldset>
<table id="dataTable2" lay-filter='dataTable2' lay-filter="dataTable2"></table>
</div>
<script type="text/javascript">
	var conId;
	var data;
    layui.use(['table','jquery'], function() {
        var table = layui.table
		    ,$ = layui.$;
		//楼栋查询
        table.render({
			id: 'idTest'
            ,elem: '#dataTable1'
            //,skin: 'line' //行边框风格
            //,even: true //开启隔行背景
            //,size: 'sm' //小尺寸的表格
            //,height: 550
            //,height: 'full-20' //浏览器最大高度
            ,toolbar: true
			,defaultToolbar: false//设置右边筛选，导出，打印显示
            ,url: '{:url("house/Ban/index")}' //数据接口
            ,page: true //开启分页
            ,limit: 10
            ,text: {
                none : '暂无相关数据'
            }
            ,cols: [[ //表头
                {field: 'ban_number', width: 110, align:'center', title: '楼栋编号'}
				,{field: 'ban_damage_id', width: 100, align:'center', title: '完损等级', templet: function(d) {
				    return params.damages[d.ban_damage_id];
				}}
				,{field: 'ban_struct_id', width: 100, align:'center', title: '结构类别', templet: function(d) {
				    return params.structs[d.ban_struct_id];
				}}
                ,{field: 'ban_owner_id', width: 80, align:'center', title: '产别', templet: function(d) {
                    return params.owners[d.ban_owner_id];
                }}
                ,{field: 'ban_address', width: 140, align:'center', title: '地址'}
            ]]
            ,done:function(res,curr,count){
               
            }
        },isShowInst);
        //房屋查询
        table.render({
        	elem: '#dataTable2'
        		//,height: 550
        		//,height: 'full-20' //浏览器最大高度
        	,toolbar: true
			,defaultToolbar: false //设置右边筛选，导出，打印显示
        	,url: '{:url("house/House/index")}' //数据接口
        	,page: true //开启分页
        	,limit: 10
        	,text: {
        		none: '暂无相关数据'
        	},
        	cols: [
        		[ //表头
				{
					type: 'checkbox',
					fixed: 'left'
				},{
        				field: 'house_number',
        				width: 140,
        				title: '房屋编号'
        			}, {
        				field: 'ban_number',
        				width: 110,
        				title: '楼栋编号'
        			}, {
        				field: 'tenant_name',
        				width: 100,
        				title: '租户姓名'
        			}, {
        				field: 'ban_inst_id',
        				width: 120,
        				title: '管段',
        				hide: isShowInst,
        				templet: function(d) {
        					return params.insts[d.ban_inst_id];
        				}
        			}, {
        				field: 'ban_owner_id',
        				width: 60,
        				title: '产别',
        				templet: function(d) {
        					return params.owners[d.ban_owner_id];
        				}
        			}, {
        				field: 'house_use_id',
        				width: 100,
        				title: '使用性质',
        				templet: function(d) {
        					return params.uses[d.house_use_id];
        				}
        			}, {
        				field: 'ban_address',
        				width: 200,
        				title: '地址'
        			}, {
        				field: 'house_area',
        				width: 80,
        				title: '建面'
        			}, {
        				field: 'house_lease_area',
        				width: 100,
        				title: '计租面积'
        			}, {
        				field: '',
        				width: 80,
        				title: '单元',
        				templet: function(d) {
        					return d.house_unit_id + '/' + d.ban_units;
        				}
        			}, {
        				field: '',
        				width: 80,
        				title: '楼层',
        				templet: function(d) {
        					return d.house_floor_id + '/' + d.ban_floors;
        				}
        			}
        
        		]
        	],
        	done: function(res, curr, count) {
				
        	}
        }, isShowInst);
		  //监听行单击事件（单击事件为：rowDouble）
			table.on('row(dataTable1)',function(obj){
				data = obj.data;
				conId = data.id;
				console.log(data);
				//标注选中样式
				obj.tr.addClass('layui-table-click').siblings().removeClass('layui-table-click');
			});
			table.on('checkbox(dataTable2)', function(obj){
              var checkStatus = table.checkStatus('dataTable2');
              var data = checkStatus.data;
              console.log(data);
          });

		$(".j-search-fr .layui-btn:last").addClass("on");//搜索最后按钮样式
    });
	var callbackdata = function () {
         return data;
    }
</script>
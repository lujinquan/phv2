<!-- 使用权变更申请 -->
<form class="layui-form" action="" method="post">
	<div class="j-details-box floorWrap">
		<fieldset id="item1" class="layui-elem-field layui-field-title j-field-box">
			<legend>基本信息</legend>
		</fieldset>
		<div class="layui-row layui-form-item layui-col-space90">
			<div class="layui-col-md12">
				<label class="j-form-label"><i class="red">*</i> 房屋编号</label>
				<div class="j-input-inline j-tips">
					<input type="text" id="house_number" name="house_number" lay-verify="required" value="" placeholder="点击查询" readonly autocomplete="off" class="layui-input j-search-input">
					<input type="hidden" id="ban_id" name="ban_id">
					<input type="hidden" id="house_id" name="house_id">
					<b class="j-explain-search j-house_number">查询</b>
				</div>
				<div class="layui-form-mid layui-word-aux j-size-class"><i class="layui-icon layui-icon-tips"></i>使用权变更后，原租约自动失效！</div>
			</div>
		</div>
		<div class="layui-row layui-form-item layui-col-space90">
			<div class="layui-col-md4">
				<label class="j-form-label">楼栋编号</label>
				<div class="j-input-inline">
					<input type="text" id="reduction_id" value="" placeholder=""   readonly autocomplete="off" class="layui-input">
				</div>
			</div>
			<div class="layui-col-md8">
				<label class="j-form-label">楼栋地址</label>
				<div class="j-input-inline">
					<input type="text" id="reduction_address" value="" placeholder=""   readonly autocomplete="off" class="layui-input">
				</div>
			</div>
		</div>
		<div class="layui-row layui-form-item layui-col-space90">
			<div class="layui-col-md4">
				<label class="j-form-label">楼层</label>
				<div class="j-input-inline">
					<input type="text" id="house_floor_id" value="" placeholder=""   readonly autocomplete="off" class="layui-input">
				</div>
			</div>
			<div class="layui-col-md4">
				<label class="j-form-label">使用面积</label>
				<div class="j-input-inline">
					<input type="text" id="house_use_area" readonly value="" placeholder=""  autocomplete="off" class="layui-input">
				</div>
			</div>
			<div class="layui-col-md4">
				<label class="j-form-label">计租面积</label>
				<div class="j-input-inline">
					<input type="text" id="house_lease_area" readonly value="" placeholder=""  autocomplete="off" class="layui-input">
				</div>
			</div>
		</div>
		<div class="layui-row layui-form-item layui-col-space90">
			<div class="layui-col-md4">
				<label class="j-form-label">楼栋产别</label>
				<div class="j-input-inline">
					<input type="text" id="reduction_class" value="" placeholder=""   readonly autocomplete="off" class="layui-input">
				</div>
			</div>
			<div class="layui-col-md4">
				<label class="j-form-label">使用性质</label>
				<div class="j-input-inline">
					<input type="text" id="reduction_nature" value="" placeholder=""   readonly autocomplete="off" class="layui-input">
				</div>
			</div>
		</div>
		<div class="layui-row layui-form-item layui-col-space90">
			<div class="layui-col-md6">
				<div class="j-column-box">
					<div class="j-column-title clearfix">
						当前信息
					</div>
					<div class="j-column-con clearfix">
						<div class="layui-row layui-form-item layui-col-space90">
							<div class="layui-col-md12">
								<label class="j-form-label"><i class="red">*</i> 租户ID</label>
								<div class="j-input-inline">
									<input type="text" id="old_tenant_number" value="" readonly placeholder="" autocomplete="off" class="layui-input">
									<input type="hidden" id="old_tenant_id" name="old_tenant_id">
								</div>
							</div>
						</div>
						<div class="layui-row layui-form-item layui-col-space90">
							<div class="layui-col-md12">
								<label class="j-form-label"><i class="red">*</i> 租户姓名</label>
								<div class="j-input-inline">
									<input type="text" id="old_tenant_name" name="old_tenant_name" value="" readonly placeholder="" autocomplete="off" class="layui-input">
								</div>
							</div>
						</div>
						<div class="layui-row layui-form-item layui-col-space90">
							<div class="layui-col-md12">
								<label class="j-form-label"><i class="red">*</i> 身份证号</label>
								<div class="j-input-inline">
									<input type="text" id="old_tenant_card" name="old_tenant_card" readonly value="" lay-verify="require|verifyidnumber"  placeholder="" autocomplete="off" class="layui-input">
								</div>
							</div>
						</div>
						<div class="layui-row layui-form-item layui-col-space90 j-tips-boxs j-visibility">
							<div class="layui-col-md12">
								<div class="j-input-inline j-tips-show">
									<i class="layui-icon layui-icon-tips"></i>请补充完整身份证号
									<a id="old_tenant_info" title="修改租户信息" target="_blank">
										<label>点击跳转</label>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="layui-col-md6">
				<div class="j-column-box">
					<div class="j-column-title clearfix">
						新租户信息
					</div>
					<div class="j-column-con clearfix">
						<div class="layui-row layui-form-item layui-col-space90">
							<div class="layui-col-md12">
								<label class="j-form-label"><i class="red">*</i> 租户ID</label>
								<div class="j-input-inline">
									<input type="text" id="new_tenant_number" lay-verify="required" name="new_tenant_number" value="" placeholder="点击查询" readonly autocomplete="off" class="layui-input j-search-input">
									<input type="hidden" id="new_tenant_id" name="new_tenant_id">
									<b class="j-explain-search j-tenant_number">查询</b>
								</div>
							</div>
						</div>
						<div class="layui-row layui-form-item layui-col-space90">
							<div class="layui-col-md12">
								<label class="j-form-label"><i class="red">*</i> 租户姓名</label>
								<div class="j-input-inline">
									<input type="text" id="new_tenant_name" name="new_tenant_name" readonly value=""  placeholder="" autocomplete="off" class="layui-input">
								</div>
							</div>
						</div>
						<div class="layui-row layui-form-item layui-col-space90">
							<div class="layui-col-md12">
								<label class="j-form-label"><i class="red">*</i> 身份证号</label>
								<div class="j-input-inline">
									<input type="text" id="new_tenant_card" name="new_tenant_card" readonly value=""  lay-verify="require|verifynewid" placeholder="" autocomplete="off" class="layui-input">
								</div>
							</div>
						</div>
						<div class="layui-row layui-form-item layui-col-space90">
							<div class="layui-col-md12">
								<div class="j-input-inline j-tips-show">
								  <span class="">
									<i class="layui-icon layui-icon-tips"></i>
									<a id="add_tenant_info" title="新增租户信息" target="_blank">
									  <label>点击新增租户信息</label>
									</a>
								  </span>
								  <span class="j-tips-newboxs j-visibilitys">
									<i class="layui-icon layui-icon-tips"></i>请补充完整身份证号
									<a id="new_tenant_info" title="修改租户信息" target="_blank">
									  <label>点击跳转</label>
									</a>
								  </span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-row layui-form-item layui-col-space90">
			<div class="layui-col-md4">
				<label class="j-form-label"><i class="red">*</i> 变更类型</label>
				<div class="j-input-inline">
					<select name="change_use_type" lay-verify="required" class="field-cid" type="select">
						<option value="">请选择</option>
					    {volist name="params['usetypes']" id="v"}
					    <option value="{$key}">{$v}</option>
					    {/volist}
					</select>
				</div>
			</div>
			<div class="layui-col-md4">
				<label class="j-form-label">手续费</label>
				<div class="j-input-inline">
					<input min="0" type="number" name="service_rent" value="" placeholder="" autocomplete="off" class="layui-input">
				</div>
			</div>
			<div class="layui-col-md4">
				<label class="j-form-label">转让金额</label>
				<div class="j-input-inline">
					<input type="number" min="0" id="tenant_money" name="transfer_rent" value="" placeholder="" autocomplete="off" class="layui-input">
				</div>
			</div>
		</div>
		<div class="layui-row layui-form-item layui-col-space90">
			<div class="layui-col-md8">
				<label class="j-form-label">异动原因</label>
				<div class="j-input-inline">
					<input type="text" id="tenant_reason" name="change_remark" value="" placeholder="" autocomplete="off" class="layui-input">
				</div>
			</div>
			<div class="layui-col-md4">
				<label class="j-form-label">是否生成租约</label>
				<div class="j-input-inline j-input-radio">
					<input type="radio" name="is_create_lease" value="1" title="是">
					<input type="radio" name="is_create_lease" value="0" title="否" checked="">
				</div>
			</div>
		</div>
		<fieldset id="item1" class="layui-elem-field layui-field-title j-field-box">
			<legend>填报信息</legend>
		</fieldset>
		<div class="layui-row layui-form-item layui-col-space90">
			<div class="layui-col-md12">
				<div class="j-enclosure-upload clearfix">
					<div class="j-enclosure-label">{if condition="in_array('UseChangeApplication',$config['changeuse_file_upload'])"}<i class="red">*</i>{/if} 书面申请报告</div>
					<div class="j-enclosure-label j-uplode-icon">
						<i><img src="/static/system/image/Group8.png"></i>点击上传
						<button type="button" class="layui-btn layui-btn-primary" id="upload_img3">上传图片</button>
					</div>
					<div class="layui-form-mid layui-word-aux">限制5M</div>
				</div>
				<div class="j-enclosure-imgs clearfix">
					<div id="upload_img_list3" class="upload_img_list j-viewer-img"> </div>
				</div>
			</div>
			<div class="layui-upload">
			</div>
		</div>
		<div class="layui-row layui-form-item layui-col-space90">
			<div class="layui-col-md12">
				<div class="j-enclosure-upload clearfix">
					<div class="j-enclosure-label">{if condition="in_array('UseChangeApproval',$config['changeuse_file_upload'])"}<i class="red">*</i>{/if} 审批表</div>
					<div class="j-enclosure-label j-uplode-icon">
						<i><img src="/static/system/image/Group8.png"></i>点击上传
						<button type="button" class="layui-btn layui-btn-primary" id="upload_img1">上传图片</button>
					</div>
					<div class="layui-form-mid layui-word-aux">限制5M</div>
				</div>
				<div class="j-enclosure-imgs clearfix">
					<div id="upload_img_list1" class="upload_img_list j-viewer-img"> </div>
				</div>
			</div>
			<div class="layui-upload">
			</div>
		</div>
		<div class="layui-row layui-form-item layui-col-space90">
			<div class="layui-col-md12">
				<div class="j-enclosure-upload clearfix">
					<div class="j-enclosure-label">{if condition="in_array('UseChangeOther',$config['changeuse_file_upload'])"}<i class="red">*</i>{/if} 其他</div>
					<div class="j-enclosure-label j-uplode-icon">
						<i><img src="/static/system/image/Group8.png"></i>点击上传
						<button type="button" class="layui-btn layui-btn-primary" id="upload_img2">上传图片</button>
					</div>
					<div class="layui-form-mid layui-word-aux">限制5M</div>
				</div>
				<div class="j-enclosure-imgs clearfix">
					<div id="upload_img_list2" class="upload_img_list j-viewer-img"> </div>
				</div>
			</div>
			<div class="layui-upload">
			</div>
		</div>
		<fieldset id="item2" class="layui-elem-field layui-field-title j-field-box">
			<legend>若勾选自动发租约，身份证附件必传</legend>
		</fieldset>
		<div class="layui-row layui-form-item layui-col-space90">
			<div class="layui-col-md12">
				<div class="j-enclosure-upload clearfix">
					<div class="j-enclosure-label">{if condition="in_array('Houselease',$config['changelease_file_upload'])"}<i class="red">*</i>{/if} 计租表</div>
					<div class="j-enclosure-label j-uplode-icon">
						<i><img src="/static/system/image/Group8.png"></i>点击上传
						<button type="button" class="layui-btn layui-btn-primary" id="upload_img10">上传图片</button>
					</div>
					<div class="layui-form-mid layui-word-aux">限制5M</div>
				</div>
				<div class="j-enclosure-imgs clearfix">
					<div id="upload_img_list10" class="upload_img_list j-viewer-img"> </div>
				</div>
			</div>
			<div class="layui-upload">
			</div>
		</div>
		<div class="layui-row layui-form-item layui-col-space90">
			<div class="layui-col-md12">
				<div class="j-enclosure-upload clearfix">
					<div class="j-enclosure-label">{if condition="in_array('HouseForm',$config['changelease_file_upload'])"}<i class="red">*</i>{/if} 旧租约</div>
					<div class="j-enclosure-label j-uplode-icon">
						<i><img src="/static/system/image/Group8.png"></i>点击上传
						<button type="button" class="layui-btn layui-btn-primary" id="upload_img11">上传图片</button>
					</div>
					<div class="layui-form-mid layui-word-aux">限制5M</div>
				</div>
				<div class="j-enclosure-imgs clearfix">
					<div id="upload_img_list11" class="upload_img_list j-viewer-img"> </div>
				</div>
			</div>
			<div class="layui-upload">
			</div>
		</div>
		<div class="layui-row layui-form-item layui-col-space90">
			<div class="layui-col-md12">
				<div class="j-enclosure-upload clearfix">
					<div class="j-enclosure-label">{if condition="in_array('TenantReIDCard',$config['changelease_file_upload'])"}<i class="red">*</i>{/if} 身份证</div>
					<div class="j-enclosure-label j-uplode-icon">
						<i><img src="/static/system/image/Group8.png"></i>点击上传
						<button type="button" class="layui-btn layui-btn-primary" id="upload_img12">上传图片</button>
					</div>
					<div class="layui-form-mid layui-word-aux">限制5M</div>
				</div>
				<div class="j-enclosure-imgs clearfix">
					<div id="upload_img_list12" class="upload_img_list j-viewer-img"> </div>
				</div>
			</div>
			<div class="layui-upload">
			</div>
		</div>
		{include file="common/submit"}
		<!-- <div class="layui-row layui-form-item layui-col-space90">
			<div class="j-margin-btn">
				<a href="javascript:history.go(-1)" class="layui-btn layui-btn-primary">取消</a>
				<button type="submit" j-data="{'save_type':'save'}" class="layui-btn" lay-submit lay-filter="formSubmit">保存</button>
				<button type="submit" j-data="{'save_type':'submit'}" class="layui-btn" lay-submit lay-filter="formSubmit">保存并提交</button>
			</div>
		</div> -->
  </div>
</form>
{include file="system@block/layui" /}
<!-- 图片查看 -->
<link rel="stylesheet" href="__PUBLIC_JS__/viewer/viewer.min.css?v={:config('hisiphp.version')}">
<script type="text/javascript" src="__PUBLIC_JS__/viewer/viewer-jquery.min.js?v={:config('hisiphp.version')}"></script>
<script type="text/javascript">
	/*上传参数设定*/
	var file1 = 'UseChangeApproval'; //审批表
	var file2 = 'UseChangeOther'; //其他
	var file3 = 'UseChangeApplication'; //书面申请报告
	var upurl1 = "{:url('system/Api/upload')}?input="+ file1 +"&group=change&water=no";
	var upurl2 = "{:url('system/Api/upload')}?input="+ file2 +"&group=change&water=no";
	var upurl3 = "{:url('system/Api/upload')}?input="+ file3 +"&group=change&water=no";

	var upurl10 = "{:url('system/Api/upload')}?input=Houselease&group=change&water=no"; //计租表
	var upurl11 = "{:url('system/Api/upload')}?input=HouseForm&group=change&water=no"; //住宅租约
	var upurl12 = "{:url('system/Api/upload')}?input=TenantReIDCard&group=change&water=no"; //身份证
	var duotu = true; //是否为多图上传true false
	
	layui.use(['jquery','table','layer', 'upload','form'], function() {
		var table = layui.table
		    ,form = layui.form
			,$ = layui.jquery
			,upload = layui.upload
			,layer = layui.layer;
              //限制input输入框字符
              $("input[type=number]").keypress(function(e) {
              　　if (!String.fromCharCode(e.keyCode).match(/[0-9\.]/)) {
              　　　　return false;
              　　}
              });
		      //获取楼栋查询器
			  $(".layui-form").on('click','.j-house_number',function(){
				 layer.open({
					title: '房屋查询器'
					,type: 2
					,offset: 'auto'
					,area: ['70%', '60%']
					, btn:false
					,pageTabs: false
					,content: '{:url('system/index/house')}?hisi_iframe=yes&change_type=13'
					,btn: ['确定','关闭']
					,yes: function(index, layero){
						var row = window["layui-layer-iframe" + index].hoesedata();
					if(row){
						if(row.color_status != 1){ //正常状态下的才可以执行
						    layer.msg("当前数据不可选！");
							return false;
						}
						layer.close(index);
						$("#house_id").val(row.house_id);//获取楼栋id
						$("#ban_id").val(row.ban_id);//获取楼栋id
						$("#house_number").val(row.house_number);//获取楼栋编号
						$("#old_tenant_id").val(row.tenant_id);//获取租户id
						$("#old_tenant_number").val(row.tenant_number);//当前租户编号
						$("#old_tenant_name").val(row.tenant_name);//当前租户姓名
						$("#old_tenant_card").val(row.tenant_card);//当前租户身份证号
						$("#reduction_id").val(row.ban_number);//获取楼栋编号
						$("#reduction_address").val(row.ban_address);//获取楼栋地址
						$("#house_floor_id").val(row.house_floor_id);//获取楼层数
						$("#reduction_class").val(params.owners[row.ban_owner_id]);//获取产别
						$("#reduction_nature").val(params.uses[row.house_use_id]);//获取楼栋使用性质
						$("#house_use_area").val(row.house_use_area);//获取使用面积
						$("#house_lease_area").val(row.house_lease_area);//获取计租面积
						if(!row.tenant_card || row.tenant_card==0){
							$(".j-tips-boxs").removeClass("j-visibility");
						}
						//$('#old_tenant_info').attr('href','{:url('house/tenant/edit')}?group=y&flag=change&id='+row.tenant_id);
					}else{
						layer.msg("房屋没选择!");
						return false;
					}
					},btn2: function(index, layero){
						layer.close(index);
					}
				  });
				 })	
			//修改租户
			$("#old_tenant_info").on('click',function(){
				var old_tenant_id = $("#old_tenant_id").val();
				layer.open({
					title: '修改租户'
					,type: 2
					,offset: 'auto'
					,area: ['70%', '60%']
					, btn:false
					,pageTabs: false
					,content: '{:url('house/tenant/edit')}?group=y&hisi_iframe=yes&flag=change&id='+old_tenant_id
					,btn: false
					,yes: function(index, layero){

					}
					,cancel: function(){ 
					    console.log(old_tenant_id);
					    $.ajax({
					        type: 'GET',
					        url: '{:url('house/api/tenant_info')}?id='+old_tenant_id,
					        success: function(res) {
					            console.log(res);
					            if(res.data.tenant_card){
					            	$("#old_tenant_card").val(res.data.tenant_card);
					            	$(".j-tips-boxs").addClass("j-visibility");
					            }
					        }
					    });
					}
			  	});
			})

/*			//获取楼栋查询器
			$("#old_tenant_info").on('click',function(){
				var old_tenant_id = $("#old_tenant_id").val();
				layer.open({
					title: '修改租户哟'
					,type: 2
					,offset: 'auto'
					,area: ['70%', '60%']
					, btn:false
					,pageTabs: false
					,content: '{:url('house/tenant/edit')}?group=y&hisi_iframe=yes&flag=change&id='+old_tenant_id
					,btn: ['确定','关闭']
					,yes: function(index, layero){
						console.log(layero);
					// 	var row = window["layui-layer-iframe" + index].hoesedata();
					// if(row){
					// 	if(row.color_status != 1){ //正常状态下的才可以执行
					// 	    layer.msg("当前数据不可选！");
					// 		return false;
					// 	}
					// 	layer.close(index);
					// 	$("#house_id").val(row.house_id);//获取楼栋id
					// 	$("#ban_id").val(row.ban_id);//获取楼栋id
					// 	$("#house_number").val(row.house_number);//获取楼栋编号
					// 	$("#old_tenant_id").val(row.tenant_id);//获取租户id
					// 	$("#old_tenant_number").val(row.tenant_number);//当前租户编号
					// 	$("#old_tenant_name").val(row.tenant_name);//当前租户姓名
					// 	$("#old_tenant_card").val(row.tenant_card);//当前租户身份证号
					// 	$('#old_tenant_info').attr('href','{:url('house/tenant/edit')}?group=y&flag=change&id='+row.tenant_id);
					// }else{
					// 	layer.msg("房屋没选择!");
					// 	return false;
					// }
				},btn2: function(index, layero){
					layer.close(index);
				}
			  });
			})	*/


		  //获取租户查询器
		   $(".layui-form").on('click','.j-tenant_number',function(){
		  		layer.open({
					title: '租户查询器'
					,type: 2
					,offset: 'auto'
					,area: ['70%', '60%']
					, btn:false
					,pageTabs: false
					,content: '{:url('system/index/tenant')}?hisi_iframe=yes&change_type=13'
					,btn: ['确定','关闭']
					,yes: function(index, layero){
						var row = window["layui-layer-iframe" + index].tenantdata();
						//console.log(row);
						href="{:url('house/tenant/index')}?change_type=13&tenant_number="
						layer.close(index);
						$("#new_tenant_id").val(row.tenant_id);//获取租户id
						$("#new_tenant_number").val(row.tenant_number);//获取租户编号
						$("#new_tenant_name").val(row.tenant_name);
						$("#new_tenant_card").val(row.tenant_card);
						if(!row.tenant_card||row.tenant_card==0){
							$(".j-tips-newboxs").removeClass("j-visibilitys");
						}
						//$('#new_tenant_info').attr('href','{:url('house/tenant/edit')}?group=y&flag=change&id='+row.tenant_id);
					},btn2: function(index, layero){
						layer.close(index);
					}
		   		});
		  	})

		   $("#new_tenant_info").on('click',function(){
				var new_tenant_id = $("#new_tenant_id").val();
				layer.open({
					title: '修改租户'
					,type: 2
					,offset: 'auto'
					,area: ['70%', '60%']
					, btn:false
					,pageTabs: false
					,content: '{:url('house/tenant/edit')}?group=y&hisi_iframe=yes&flag=change&id='+new_tenant_id
					,btn: false
					,yes: function(index, layero){

					}
					,cancel: function(){ 
					    console.log(old_tenant_id);
					    $.ajax({
					        type: 'GET',
					        url: '{:url('house/api/tenant_info')}?id='+new_tenant_id,
					        success: function(res) {
					            //console.log(res);
					            if(res.data.tenant_card && res.data.tenant_card!=0){
					            	$("#new_tenant_card").val(res.data.tenant_card);
					            	$(".j-tips-newboxs").addClass("j-visibilitys");
					            }
					        }
					    });
					}
			  	});
			})
			//新增租户
			$("#add_tenant_info").on('click',function(){
				layer.open({
					title: '新增租户'
					,type: 2
					,offset: 'auto'
					,area: ['70%', '60%']
					,btn:false
					,pageTabs: false
					,content: '{:url('house/tenant/add')}?group=x&hisi_iframe=yes&flag=change'
					,btn: false
					,yes: function(index, layero){
						console.log(1);
					}
					,cancel: function(){ 
					    console.log(old_tenant_id);
					    $.ajax({
					        type: 'GET',
					        url: '{:url('house/api/tenant_info')}',
					        success: function(res) {
					            console.log(res);
					        }
					    });
					}
			  	});
			})
		//身份证
		upload.render({
			elem: '#upload_img12',
			url: upurl12,
			size: 1024*5,
			multiple: duotu,
			field: 'TenantReIDCard',
			before: function(obj) {
				layer.msg('图片上传中...', {
					icon: 16,
					shade: 0.01,
					time: 0
				})
			},
			done: function(res) {
				layer.close(layer.msg()); //关闭上传提示窗口
				if (duotu == true) {
					//调用多图上传方法,其中res.imgid为后台返回的一个随机数字
					$('#upload_img_list12').append('<dd class="item_img" id="' + res.data.name +
							'"><div class="operate"><i  class="layui-icon-close-fill layui-icon"></i></div><img src="' + res.data.file +
							'" class="img" ><input type="hidden" name="TenantReIDCard[]" value="' + res.data.id + '" /></dd>');
				} else {
					//调用单图上传方法,其中res.imgid为后台返回的一个随机数字
					$('#upload_img_list12').html('<dd class="item_img" id="' + res.data.name +
							'"><div class="operate"><i  class="layui-icon-close-fill layui-icon"></i></div><img src="' + res.data.file +
							'" class="img" ><input type="hidden" name="TenantReIDCard[]" value="' + res.data.id + '" /></dd>');
				}
			}
		})
		//计租表
		upload.render({
			elem: '#upload_img10',
			url: upurl10,
			size: 1024*5,
			multiple: duotu,
			field: 'Houselease',
			before: function(obj) {
				layer.msg('图片上传中...', {
					icon: 16,
					shade: 0.01,
					time: 0
				})
			},
			done: function(res) {
				layer.close(layer.msg()); //关闭上传提示窗口
				if (duotu == true) {
					//调用多图上传方法,其中res.imgid为后台返回的一个随机数字
					$('#upload_img_list10').append('<dd class="item_img" id="' + res.data.name +
							'"><div class="operate"><i  class="layui-icon-close-fill layui-icon"></i></div><img src="' + res.data.file +
							'" class="img" ><input type="hidden" name="Houselease[]" value="' + res.data.id + '" /></dd>');
				} else {
					//调用单图上传方法,其中res.imgid为后台返回的一个随机数字
					$('#upload_img_list10').html('<dd class="item_img" id="' + res.data.name +
							'"><div class="operate"><i  class="layui-icon-close-fill layui-icon"></i></div><img src="' + res.data.file +
							'" class="img" ><input type="hidden" name="Houselease[]" value="' + res.data.id + '" /></dd>');
				}
			}
		})
		//住宅租约
		upload.render({
			elem: '#upload_img11',
			url: upurl11,
			size: 1024*5,
			multiple: duotu,
			field: 'HouseForm',
			before: function(obj) {
				layer.msg('图片上传中...', {
					icon: 16,
					shade: 0.01,
					time: 0
				})
			},
			done: function(res) {
				layer.close(layer.msg()); //关闭上传提示窗口
				if (duotu == true) {
					//调用多图上传方法,其中res.imgid为后台返回的一个随机数字
					$('#upload_img_list11').append('<dd class="item_img" id="' + res.data.name +
							'"><div class="operate"><i  class="layui-icon-close-fill layui-icon"></i></div><img src="' + res.data.file +
							'" class="img" ><input type="hidden" name="HouseForm[]" value="' + res.data.id + '" /></dd>');
				} else {
					//调用单图上传方法,其中res.imgid为后台返回的一个随机数字
					$('#upload_img_list11').html('<dd class="item_img" id="' + res.data.name +
							'"><div class="operate"><i  class="layui-icon-close-fill layui-icon"></i></div><img src="' + res.data.file +
							'" class="img" ><input type="hidden" name="HouseForm[]" value="' + res.data.id + '" /></dd>');
				}
			}
		})
		  //审批表
		  upload.render({
		  	elem: '#upload_img1',
		  	url: upurl1,
		  	size: 1024*5,
		  	multiple: duotu,
		  	field: file1,
		  	before: function(obj) {
		  		layer.msg('图片上传中...', {
		  			icon: 16,
		  			shade: 0.01,
		  			time: 0
		  		})
		  	},
		  	done: function(res) {
		  		layer.close(layer.msg()); //关闭上传提示窗口
		  		if (duotu == true) {
		  			//调用多图上传方法,其中res.imgid为后台返回的一个随机数字
		  			$('#upload_img_list1').append('<dd class="item_img" id="' + res.data.name +
		  				'"><div class="operate"><i  class="layui-icon-close-fill layui-icon"></i></div><img src="' + res.data.file +
		  				'" class="img" ><input type="hidden" name="' + file1 + '[]" value="' + res.data.id + '" /></dd>');
		  		} else {
		  			//调用单图上传方法,其中res.imgid为后台返回的一个随机数字
		  			$('#upload_img_list1').html('<dd class="item_img" id="' + res.data.name +
		  				'"><div class="operate"><i  class="layui-icon-close-fill layui-icon"></i></div><img src="' + res.data.file +
		  				'" class="img" ><input type="hidden" name="' + file1 + '[]" value="' + res.data.id + '" /></dd>');
		  		}
		  	}
		  })
		  //其他
		  upload.render({
		  	elem: '#upload_img2',
		  	url: upurl2,
		  	size: 1024*5,
		  	multiple: duotu,
		  	field: file2,
		  	before: function(obj) {
		  		layer.msg('图片上传中...', {
		  			icon: 16,
		  			shade: 0.01,
		  			time: 0
		  		})
		  	},
		  	done: function(res) {
		  		layer.close(layer.msg()); //关闭上传提示窗口
		  		if (duotu == true) {
		  			//调用多图上传方法,其中res.imgid为后台返回的一个随机数字
		  			$('#upload_img_list2').append('<dd class="item_img" id="' + res.data.name +
		  				'"><div class="operate"><i  class="layui-icon-close-fill layui-icon"></i></div><img src="' + res.data.file +
		  				'" class="img" ><input type="hidden" name="' + file2 + '[]" value="' + res.data.id + '" /></dd>');
		  		} else {
		  			//调用单图上传方法,其中res.imgid为后台返回的一个随机数字
		  			$('#upload_img_list2').html('<dd class="item_img" id="' + res.data.name +
		  				'"><div class="operate"><i  class="layui-icon-close-fill layui-icon"></i></div><img src="' + res.data.file +
		  				'" class="img" ><input type="hidden" name="' + file2 + '[]" value="' + res.data.id + '" /></dd>');
		  		}				
		  	}
		  })
		  //书面申请报告
		  upload.render({
		  	elem: '#upload_img3',
		  	url: upurl3,
		  	size: 1024*5,
		  	multiple: duotu,
		  	field: file3,
		  	before: function(obj) {
		  		layer.msg('图片上传中...', {
		  			icon: 16,
		  			shade: 0.01,
		  			time: 0
		  		})
		  	},
		  	done: function(res) {
		  		layer.close(layer.msg()); //关闭上传提示窗口
		  		if (duotu == true) {
		  			//调用多图上传方法,其中res.imgid为后台返回的一个随机数字
		  			$('#upload_img_list3').append('<dd class="item_img" id="' + res.data.name +
		  				'"><div class="operate"><i  class="layui-icon-close-fill layui-icon"></i></div><img src="' + res.data.file +
		  				'" class="img" ><input type="hidden" name="' + file3 + '[]" value="' + res.data.id + '" /></dd>');
		  		} else {
		  			//调用单图上传方法,其中res.imgid为后台返回的一个随机数字
		  			$('#upload_img_list3').html('<dd class="item_img" id="' + res.data.name +
		  				'"><div class="operate"><i  class="layui-icon-close-fill layui-icon"></i></div><img src="' + res.data.file +
		  				'" class="img" ><input type="hidden" name="' + file3 + '[]" value="' + res.data.id + '" /></dd>');
		  		}
		  	}
		  })


		  /*
		  删除上传图片
		  */
		  $(document).on("click", ".upload_img_list dd i", function() {
		  	$(this).parents("dd").remove();
		  })
		  //自定义表单验证
		  form.verify({
			  //验证当前信息身份证号
			   verifyidnumber: function (value) {
				    if(value.length <= 0){
				          $(".j-tips-boxs").removeClass("j-visibility");
				     }
					 else{
						 $(".j-tips-boxs").addClass("j-visibility");
						 return false;
					 }
			   },
			   //验证新租户身份证号
			   verifynewid: function (value) {
				   if(value.length <= 0){
				          $(".j-tips-newboxs").removeClass("j-visibility");
				    }else{
					   	 $(".j-tips-newboxs").addClass("j-visibility");
					   	 return false;
				    }
			   }
		  });  


	});
</script>
